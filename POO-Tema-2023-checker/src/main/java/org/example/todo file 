TODO line 972 - 1000, creating and sending request to user